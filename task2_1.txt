1. Как получить цепочку вида (()), а не ()() для С-> СС|(C)|e?
Если не вносить изменений, то цепочка может выглядеть как C-> CC -> (C)C -> (C)(C) -> (C)() -> ()().
Для того, что получилось (()), нужно убрать удвоение С, т.е. C -> (C)|e
Tогда цепочка будет выглядеть как C -> (c) -> ((C)) -> (()). 

2. Цепочка с разными скобками.
C -> CC|(C)|[C]|{C}|e
С -> CC -> (C)C -> (C){C} -> (CC){C} -> ([C]C){C} -> {([C]C)}{C} -> {([C]C)}{[C]} -> {([(C)]C)}{[C]} ->
{([(C)]C)}{[C]C} -> {([(C)]C)}{{[C]C}} -> {([()]C)}{{[C]C}} -> {([()]C)}{{[]C}} -> {([()]{C})}{{[]C}} ->
{([()]{})}{{[]C}} -> {([()]{})}{{[]}}